# RULES.md

모든 프로젝트에 공통 적용되는 규칙. 프로젝트별 규칙은 각 프로젝트의 `CLAUDE.md`에 정의한다.

---

## 1. 에이전트 행동강령

### 1.1 한국어 응답

항상 한국어로 응답하라. 코드, 커밋 메시지, 변수명은 영어.

### 1.2 수정 전 읽기

- 읽지 않은 파일을 수정하지 마라.
- 수정 대상의 사용처(import, 호출, 타입 참조)를 먼저 검색하라.
- 영향 범위를 파악한 후에만 변경을 제안하라.

### 1.3 추측 금지

- 확실하지 않으면 질문하라.
- 외부 정보(API, 패키지, 런타임 동작)는 공식 문서 확인 후 결정.
- "아마", "probably", "~일 것이다" 기반 판단 금지.
- 근거가 없으면 "모름"이라고 말하고 기다려라.

### 1.4 검증 필수

- 코드 변경 후 반드시 관련 테스트를 실행하라. 검증 없이 완료로 간주하지 마라.
- 검증 수단이 없으면 만들어라 (테스트, 스크립트, 타입 체크 등).

### 1.5 교정 시 룰 업데이트

사용자가 교정하면 CLAUDE.md 업데이트를 제안하라.

### 1.6 최소 변경

- 요청된 범위만 변경하라.
- 주변 코드 정리, 주석 추가, 리팩토링 등 요청하지 않은 개선을 하지 마라.
- docstring, type annotation, 에러 핸들링을 변경하지 않은 코드에 추가하지 마라.
- 일어날 수 없는 시나리오에 대한 방어 코드를 넣지 마라.

### 1.7 막히면 재계획

- 같은 접근을 2회 이상 반복 실패하면 멈춰라.
- 브루트포스로 밀고 나가지 마라.
- 대안을 제시하거나 사용자에게 방향을 물어라.

### 1.8 컨텍스트 관리 보조

- 작업 전환 시 `/clear`를 제안하라.
- 대규모 탐색/조사는 subagent에 위임하라.

---

!! 워크 플로우가 너무 이상함. 왜 Test first, 통합테스트 작성과 같은 이미 존재하는 룰들을 구체적으로 재언급하는거지?
워크플로우는 말그대로 일의 흐름아닌가?
그리고 에이전트는 특화 내용은 왜 빠진거지?
논의 - 아이디어, 기획, 문제 해결, 최적화 등 결국 근본적으로 문제 해결을 위한게 논의 이고
계획 - 논의 된내용을 어떻게 실행할것인가
구현 - 개발단계, 기획이라면 기획 문서를 작성하는것과같이 실제 무언가를 만드는 단계
검증 - 맞는지 확인단계
???? 뭔가 더 많겠지

이런게 워크플로우 아닌가? 테스트 작성한다 이런거는 그냥 개발단계에서 개발 코드 작성전 테스트 작성하는 TDD를 언급하는거고
이게 골든 룰이라고 적어놓은게 맞는가?

니가 나열한 지금 모든 룰들은 그냥 두서 없이 나열만 해놨지 이걸 룰이라고 할수있는게 맞나?
니가 말한 그 유명한사람들이 이따위로 룰을 만들어쓰는가? 그냥 그사람들이 한 말들을 인용한것뿐아닌가?
사실 근거 및 실제 검증된 사용사례를 말해야되는것아닌가?

## 2. 워크플로우

### 2.1 계획 먼저

- 복잡한 작업(5파일 이상, 아키텍처 변경, DB 마이그레이션)은 Plan Mode로 시작.
- 계획이 확정될 때까지 구현하지 마라.
- 막히면 앞으로 밀지 말고 재계획.

### 2.2 Test-first

테스트를 먼저 작성하고 구현하라. 구현 코드보다 테스트가 항상 먼저 존재해야 한다.

1. 통합 테스트 작성 → 실행하여 RED 확인
2. 구현 → GREEN 확인
3. 복잡한 순수 로직에 한해 unit 테스트 추가

RED 확인: AI가 항상 통과하는 테스트를 작성하는 실패 모드를 방지.

### 2.3 통합 테스트 우선

- AI 생성 코드는 내부 로직보다 통합 경계에서 실패한다.
- 구현 변경에도 살아남는 통합 테스트가 더 가치 있다.
- unit 테스트는 순수 연산 로직에만. 얇은 어댑터/단순 위임은 통합 테스트로 충분.

### 2.4 점진적 검증

- 파일 수정마다 즉시 관련 테스트를 실행하라.
- 실패 시 다음 파일로 넘어가지 마라. 먼저 고쳐라.
- 전체 수정 완료 후 전체 테스트 스위트 실행.

### 2.5 교정 → 룰화 사이클

교정 발생 → CLAUDE.md 업데이트 → 같은 실수 재발 방지. 반복할수록 CLAUDE.md가 정교해진다.

---

## 출처

- [Claude Code Best Practices (Anthropic 공식)](https://code.claude.com/docs/en/best-practices)
- [How Boris Uses Claude Code](https://paddo.dev/blog/how-boris-uses-claude-code/)
- [10 Tips from the Claude Code Team](https://paddo.dev/blog/claude-code-team-tips/)
- [The Golden Rules (Claude Code Ultimate Guide)](https://deepwiki.com/FlorianBruniaux/claude-code-ultimate-guide/16.1-the-golden-rules)
- [Agentic Coding 6 Principles & 28 Practices](https://agentic-coding.github.io/)
- [goldbergyoni/javascript-testing-best-practices](https://github.com/goldbergyoni/javascript-testing-best-practices)
